# Example feature map for a middleware platform team
metadata:
  version: 1.0
  last_updated: 2025-01-15
  team: middleware

entities:
  lock_free_queue:
    type: capability
    name: Lock-Free Queue Implementation
    description: |
      High-performance thread-safe queue using atomic operations.
      Provides bounded and unbounded variants with wait-free progress guarantees
      for producers and lock-free guarantees for consumers.

      Performance targets:
      - 10M ops/sec single producer/consumer
      - Sub-microsecond latency at p99
    enables: [message_bus, realtime_monitor]  # Specify edges from this side
    links:
      - design:[DD-123](https://docs.google.com/document/d/abc123)
      - jira:INFRA-456
    tags: [critical, performance]
    meta:
      timeframe: "2025w01"  # Calendar week 1
      effort: "2w"
      resources: ["alice", "bob"]

  message_bus:
    type: capability
    name: Inter-Process Message Bus
    description: |
      Reliable message passing system for service communication.
      Built on top of the lock-free queue for internal buffering.
    requires: [lock_free_queue]
    links:
      - jira:INFRA-789
    tags: [infrastructure]
    meta:
      timeframe: "2025w03"  # Calendar week 3
      effort: "3w"
      resources: ["charlie"]

  data_sync:
    type: capability
    name: Data Stream Synchronization
    description: |
      Time-synchronized data fusion from multiple API endpoints.
      Handles network delays, missing data, and provides interpolation.
    requires: [message_bus]
    links:
      - design:[DD-456](https://docs.google.com/document/d/def456)
    tags: [api_support, critical]
    meta:
      timeframe: "2025-02"  # February 2025
      effort: "2w"
      resources: ["alice:0.5", "dave"]

  realtime_monitor:
    type: capability
    name: Real-time Performance Monitor
    description: |
      Tracks system latency and throughput metrics without impacting
      real-time performance characteristics.
    requires: [lock_free_queue]
    links:
      - jira:INFRA-999
      - https://github.com/company/repo/issues/123
    tags: [monitoring, tech_debt]
    meta:
      timeframe: "2025w03"  # Calendar week 3
      effort: "1w"
      resources: ["eve"]

  analytics_realtime:
    type: user_story
    name: Real-time Analytics Pipeline
    description: |
      The analytics team needs to process streaming data at 100Hz with
      strict latency requirements. They need synchronized data inputs
      and reliable inter-process communication.
    requires: [data_sync, message_bus]
    meta:
      requestor: analytics_team
      timeframe: "2025q1"  # Q1 2025
      effort: "2w"
      resources: ["alice", "bob"]
    links:
      - jira:STORY-100
    tags: [q2_commitment]

  service_telemetry:
    type: user_story
    name: Service Telemetry Collection
    description: |
      SRE team needs to collect performance metrics from all services
      without impacting production latency requirements.
    requires: [realtime_monitor]
    meta:
      requestor: sre_team
      timeframe: "2025w05"  # Calendar week 5
      effort: "1w"
      resources: ["eve"]
    links:
      - jira:STORY-200
    tags: [monitoring]

  api_gateway_integration:
    type: user_story
    name: API Gateway Integration
    description: |
      API team needs high-throughput communication between
      their distributed service nodes.
    requires: [message_bus]
    meta:
      requestor: api_team
      timeframe: "2025h1"  # First half of 2025
      effort: "1.5w"
      resources: ["charlie", "dave"]
    links:
      - jira:STORY-300

  mobile_app_q3:
    type: outcome
    name: Mobile App Q3 Launch
    description: |
      Launch new mobile application with real-time features by Q3.
      Requires reliable real-time analytics and robust API integration.
    requires: [analytics_realtime, api_gateway_integration]
    links:
      - jira:EPIC-1000
      - doc:[Product Brief](https://confluence.company.com/display/PROD/Mobile-App-Launch)
    tags: [company_priority, safety_critical]
    meta:
      effort: "1d"
      resources: ["product_team"]
      end_before: "2025-09-30"  # Explicit deadline (overrides timeframe if present)

  production_observability:
    type: outcome
    name: Production Observability
    description: |
      Complete visibility into production system performance
      to meet 99.99% uptime SLA.
    requires: [service_telemetry]
    links:
      - "jira:EPIC-2000"
    tags: [operational_excellence]
    meta:
      timeframe: "2025q2"  # Q2 2025
      effort: "3d"
      resources: ["sre_team"]
      end_before: "2025-06-30"  # Explicit deadline takes precedence over timeframe
